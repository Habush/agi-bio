# This is to be used for starting the cogserver and the visuzlizer linked or run
# them independently.

# How to use
# 1. sudo pip install -U fig    # One time only
# 2. fig up -d
# 3. fig ps    # Note to what port cogserver's  17001 port is published to.
               # Look for the new port number which in 0.0.0.0:NEW_PORT->17001/tcp
               # publishing port to host is ok on devlopment machine but not
               # good for deployment on production machine.
# 4. telnet on localhost at the above port and start restapi
# 5. fig run --rm --no-deps visualizer cat /etc/hosts | grep cogserver
     # Use the ip address you get in 5th step for the CogServer ip-address
     # on the visualizer.
# 6. fig stop   # To stop the visualizer and cogserver

cogserver:
    build: .
    ports:
        - 17001
# opencog/visualizer image must be built on the machine or pulled from docker.
# The image is the apache server used to publish the visualizer.
visualizer:
    image: opencog/visualizer
    ports:
        - "80:80"
    links:
        - cogserver:cogserver
